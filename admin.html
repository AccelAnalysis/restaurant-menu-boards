<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Restaurant Menu Admin • Pro v3.0</title>
  <link rel="stylesheet" href="styles.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body class="admin-body">
  <div class="admin-container">
    <header class="admin-header">
      <div>
        <h1>Menu Board Admin <span style="font-size:0.6em;color:var(--accent)">v3.0</span></h1>
        <p>Instant remote updates • Drag & drop • Point-and-click pricing • Fire Stick ready</p>
      </div>
      <a href="./index.html" target="_blank" class="admin-link">Open Live Display →</a>
    </header>

    <!-- Restaurant & Board Selector -->
    <section class="quick-controls">
      <div class="form-row">
        <div class="form-group grow">
          <label>Restaurant</label>
          <select data-restaurant-select></select>
        </div>
        <button data-add-restaurant class="btn-primary">+ New Restaurant</button>
      </div>
      <div class="form-row">
        <input type="text" data-restaurant-name-input placeholder="Restaurant name..." class="grow">
        <button data-duplicate-restaurant class="btn-ghost">Duplicate</button>
        <button data-delete-restaurant class="btn-danger">Delete</button>
      </div>

      <div class="form-row" style="margin-top:1.5rem;">
        <div class="form-group grow">
          <label>Menu Board (Slide)</label>
          <select data-board-select></select>
        </div>
        <button data-add-board class="btn-primary">+ New Board</button>
      </div>
      <div class="form-row">
        <input type="text" data-board-name-input placeholder="Board name (e.g. Lunch Menu)..." class="grow">
        <button data-duplicate-board class="btn-ghost">Duplicate</button>
        <button data-delete-board class="btn-danger">Delete</button>
      </div>
    </section>

    <!-- Secure Display URL -->
    <section class="display-link card">
      <h2>Fire Stick / TV Display URL</h2>
      <div class="form-row">
        <input type="text" data-display-url readonly>
        <button data-copy-display-url class="btn-primary">Copy URL</button>
      </div>
      <p data-display-url-status class="status"></p>
    </section>

    <!-- Menu Editor -->
    <section class="editor-grid">
      <div class="editor-panel">
        <div class="form-row">
          <input type="text" data-menu-title-input placeholder="Menu Title (e.g. Sunny Side Café)">
          <input type="text" data-menu-subtitle-input placeholder="Subtitle (optional)">
        </div>

        <div class="toolbar">
          <button data-add-section class="btn-primary">+ Add Section</button>
        </div>

        <div data-sections class="sections-list"></div>
      </div>

      <!-- Live Preview (Fixed Position) -->
      <div class="preview-panel">
        <div class="preview-frame" data-preview-container>
          <div class="menu-board menu-board--preview" data-preview-board>
            <div class="pricing-overlay-container"></div>
            <header class="menu-header">
              <div class="menu-brand">
                <p class="menu-board-label" data-preview-label></p>
                <h1 class="menu-title" data-preview-title>Menu</h1>
                <p class="menu-subtitle" data-preview-subtitle></p>
              </div>
            </header>
            <main class="menu-sections" data-preview-sections></main>
          </div>
        </div>
        <div class="preview-instruction">
          Double-click anywhere to add a price tag • Drag to move • Resize with corner • Click × to delete
        </div>
      </div>
    </section>
  </div>

  <script src="config.js"></script>
  <script src="shared.js"></script>
  <script src="admin.js"></script> <!-- This is the NEW fixed version below -->
</body>
</html>
